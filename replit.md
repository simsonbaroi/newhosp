# Hospital Bill Calculator - Replit Migration

## Overview
A professional medical billing calculator application for hospitals and clinics. The app allows users to calculate bills for both outpatient and inpatient services, with comprehensive database management for medical items and procedures.

## Recent Changes
- **2025-01-25**: Successfully migrated from Replit Agent to standard Replit environment
- **2025-01-25**: ADDED: Complete React Native mobile app structure for Android development
- **2025-01-25**: CREATED: Mobile app with 4 main screens (Home, Outpatient, Inpatient, Database)
- **2025-01-25**: IMPLEMENTED: API service layer for mobile-backend communication
- **2025-01-25**: ADDED: Professional medical theme for React Native with dark green color scheme
- **2025-01-25**: CONFIGURED: TypeScript support and React Navigation for mobile app
- **2025-01-25**: STRUCTURED: Separate mobile directory with independent package.json and configuration
- **2025-01-25**: FIXED: Android header layout with proper SafeAreaView and StatusBar handling
- **2025-01-25**: ENHANCED: Mobile app with Android-specific styling and proper platform detection
- **2025-01-25**: ADDED: Professional header design with elevation, shadows, and medical theme integration
- **2025-01-25**: FIXED: Android header cutoff issues by removing duplicate padding and improving navigation
- **2025-01-25**: ENHANCED: Back button visibility and proper header showing across all screens
- **2025-01-25**: ADDED: Android styles.xml and MainActivity configuration for proper header handling
- **2025-01-25**: REDESIGNED: Web application header with centered logo, professional subtitle, and separate navigation row
- **2025-01-25**: ENHANCED: Header styling with improved visual hierarchy, better spacing, and glass morphism effects
- **2025-01-25**: IMPROVED: Navigation buttons with hover animations, active states, and professional medical theme integration
- **2025-01-25**: RESPONSIVE: Enhanced button text sizing to prevent overflow on mobile devices
- **2025-01-25**: IMPLEMENTED: Touch/swipe gesture support for carousel navigation on mobile devices
- **2025-01-25**: ADDED: Custom useSwipeGesture hook with configurable threshold and touch event handling
- **2025-01-25**: ENHANCED: Carousel mode now supports left/right swipe gestures to navigate between categories
- **2025-01-25**: APPLIED: Swipe functionality to both Outpatient and Inpatient carousel systems
- **2025-01-25**: OPTIMIZED: Mobile carousel layout to prevent cutoff issues on Android devices
- **2025-01-25**: ENHANCED: Center-aligned carousel cards with responsive sizing and proper spacing
- **2025-01-25**: ADDED: Extra-small (xs) breakpoint at 475px for better mobile control
- **2025-01-25**: IMPROVED: Preview buttons hidden on very small screens to maximize space for main carousel
- **2025-01-25**: OPTIMIZED: Navigation buttons made smaller for Android devices with reduced padding and tighter spacing
- **2025-01-25**: COMPRESSED: Header height reduced on mobile to provide more content space
- **2025-01-25**: ENHANCED: Mobile-first navigation design with proper button sizing and layout optimization
- **2025-01-25**: ADJUSTED: Navigation button sizes increased slightly for better Android usability while maintaining compact design
- **2025-01-25**: Applied consistent responsive design across Database, Outpatient, and Inpatient sections
- **2025-01-25**: Converted from PostgreSQL to in-memory storage for Replit compatibility
- **2025-01-25**: Fixed all TypeScript and LSP errors in storage system
- **2025-01-25**: Implemented complete API routes for medical items and bills management
- **2025-01-25**: Set up TanStack Query client for frontend API calls
- **2025-01-25**: FIXED: Comprehensive color system with consistent dark green medical theme
- **2025-01-25**: FIXED: Button contrast issues - white buttons with white labels resolved
- **2025-01-25**: Added medical-themed button variants (medical, medical-outline, medical-ghost)
- **2025-01-25**: Updated all components to use consistent medical color palette
- **2025-01-25**: Enhanced navigation header with proper medical gradient and contrast
- **2025-01-25**: Implemented glass morphism effects for cards with hover animations
- **2025-01-25**: Simplified currency system to use only Bangladeshi Taka (৳) as requested
- **2025-01-25**: Updated Outpatient calculator with complete API integration and Taka formatting
- **2025-01-25**: Updated Inpatient calculator with matching design, daily rates, and Taka system
- **2025-01-25**: Removed unnecessary multi-currency complexity per user preference
- **2025-01-25**: COMPLETED: Full migration from Replit Agent to standard Replit environment
- **2025-01-25**: Enhanced Outpatient categories with Registration Fees, Dr. Fees, and Medic Fee
- **2025-01-25**: Removed search functionality for Registration Fees, Dr. Fees, and Medic Fee categories
- **2025-01-25**: Added more detailed medical items for the three primary fee categories
- **2025-01-25**: Implemented carousel navigation for Outpatient categories with left/right arrows
- **2025-01-25**: Added focused view mode where selected category appears centered with navigation controls
- **2025-01-25**: Added X button to exit carousel mode and return to grid view
- **2025-01-25**: Enhanced carousel with preview buttons showing previous/next category names
- **2025-01-25**: Added intuitive navigation with clickable preview buttons for better user experience
- **2025-01-25**: Improved carousel alignment with left/right aligned preview buttons
- **2025-01-25**: Hidden global search bar in carousel mode for cleaner focused interface
- **2025-01-25**: Implemented identical carousel navigation system for Inpatient categories
- **2025-01-25**: Added same preview buttons, arrow navigation, and X button functionality to Inpatient
- **2025-01-25**: Implemented carousel navigation system for Database page category browsing
- **2025-01-25**: Added focused category view with preview buttons and navigation controls for Database management
- **2025-01-25**: ENFORCED: Complete Taka-only currency system - removed all non-Taka references
- **2025-01-25**: Standardized all price displays to use ৳ symbol with consistent formatting
- **2025-01-25**: Added persistent "Add Items" button to Database carousel for easy item creation
- **2025-01-25**: Enhanced Database navigation with always-active add functionality in both grid and carousel modes
- **2025-01-25**: UPDATED: Moved "Add Items" to appear under carousel categories for current category context
- **2025-01-25**: Pre-populates category field when adding items from carousel view for better workflow
- **2025-01-25**: CLEANED: Removed duplicate "Add Item" button from carousel - using existing button before search
- **2025-01-25**: CORRECTED: Removed "Add Item" from grid view, kept it in carousel view for category-specific item creation
- **2025-01-25**: RESPONSIVE: Enhanced button text sizing to prevent overflow on mobile devices
- **2025-01-25**: Applied consistent responsive design across Database, Outpatient, and Inpatient sections
- **2025-01-25**: ADDED: "Limb and Brace" category to Outpatient section with 8 medical items (braces, supports, aids)
- **2025-01-25**: UPDATED: Complete Inpatient categories replacement with 19 comprehensive categories as requested
- **2025-01-25**: Added detailed medical items for all Inpatient categories including specialized procedures and equipment
- **2025-01-25**: ADDED: Outpatient categories (Dr. Fees, Medic Fee, Medicine) to Inpatient section per user request
- **2025-01-25**: Enhanced Inpatient with inpatient-specific items for Dr. Fees, Medic Fee, and Medicine categories
- **2025-01-25**: FIXED: Laboratory search and dropdown independence - both use same database but work independently
- **2025-01-25**: Added proper mode switching between search and dropdown with automatic clearing of opposite mode selections
- **2025-01-25**: Enhanced user experience with clear help text explaining independent search/dropdown functionality
- **2025-01-25**: PERFECTED: Complete reset when switching between search and dropdown modes - no partial selections remain
- **2025-01-25**: SIMPLIFIED: Responsive dropdown that auto-reorders based on search input - closest matches appear first
- **2025-01-25**: Clean dropdown design without complex filters - just automatic relevance-based reordering
- **2025-01-25**: REPOSITIONED: Search suggestions now appear directly below search input for better UX
- **2025-01-25**: ENHANCED: Added full keyboard navigation to dropdown with arrow keys, Enter, and Escape
- **2025-01-25**: Added visual indicators - highlighted items show left border and "← Highlighted" mark
- **2025-01-25**: Added "✓ Selected" marks for already chosen items in dropdown
- **2025-01-25**: Implemented click-outside-to-close functionality for dropdown
- **2025-01-25**: ADDED: Instant dropdown filtering - type "u" to bring "Urinalysis" to top immediately
- **2025-01-25**: Smart filtering system - exact matches appear first, then starts-with, then contains
- **2025-01-25**: Real-time filter display shows current filter and match count in dropdown button
- **2025-01-25**: Added Backspace support to remove filter characters one by one
- **2025-01-25**: IMPROVED: Dropdown stays open for multiple selections, only closes on "Add to Bill" or click outside
- **2025-01-25**: Filter text resets after each selection for fresh keyword entry
- **2025-01-25**: Enhanced workflow: select multiple items → "Add to Bill" → dropdown closes automatically
- **2025-01-25**: FIXED: Dropdown maintains focus after selections - no need to click again for continued filtering
- **2025-01-25**: Seamless workflow: select item → filter automatically resets → immediately type next filter
- **2025-01-25**: Added automatic refocus system to ensure uninterrupted keyboard input flow
- **2025-01-25**: ADDED: Live total price counter for both search and dropdown selections
- **2025-01-25**: Total price appears above "Add to Bill" button with item count
- **2025-01-25**: Real-time price calculation updates as items are selected/removed
- **2025-01-25**: IMPROVED: Search input maintains focus automatically - no need to click between selections
- **2025-01-25**: Reorganized search layout: price counter on top, "Add to Bill" button on right side of tags
- **2025-01-25**: Auto-focus search input when Laboratory category opens for immediate typing
- **2025-01-25**: Seamless search workflow: type → select → automatically refocused for next search
- **2025-01-25**: REPOSITIONED: Total price counter and "Add to Bill" moved above search bar, right-aligned
- **2025-01-25**: Clean layout: price counter directly above "Add to Bill" button for better visual flow
- **2025-01-25**: Selected item tags moved above search input as requested for better visibility
- **2025-01-25**: Complete layout: selected items → price counter → add button → search box → suggestions
- **2025-01-25**: FINAL LAYOUT: Total price on left, "Add to Bill" button on right in single row for search
- **2025-01-25**: MATCHED DROPDOWN: Applied same layout to dropdown selection - price left, button right
- **2025-01-25**: COLOR MATCHED: Dropdown "Add to Bill" button now uses blue theme matching dropdown tag items
- **2025-01-25**: STYLED SEARCH: Applied same outline button style to search "Add to Bill" button with green medical theme
- **2025-01-25**: CONSISTENT CAROUSEL: Applied outline button style to carousel selected category button for design consistency
- **2025-01-25**: CRITICAL FIX: Resolved JSON parsing error by correcting API endpoint URLs
- **2025-01-25**: Fixed /api/bills/browser-session/outpatient to /api/bills?sessionId=browser-session&type=outpatient
- **2025-01-25**: Updated both Outpatient and Inpatient pages to use correct API query parameters
- **2025-01-25**: MAJOR FIXES: Fixed multiple items not being added to bill properly - now prevents duplicates
- **2025-01-25**: IMPLEMENTED: Categorized bill display with category totals and grand total
- **2025-01-25**: REMOVED: Quantity +/- buttons from bill display as requested by user
- **2025-01-25**: ENHANCED: Bill now shows items grouped by medical category with individual category totals
- **2025-01-25**: APPLIED: Same fixes to both Outpatient and Inpatient pages for consistency
- **2025-01-25**: IMPLEMENTED: Smart duplicate prevention system with confirmation dialog
- **2025-01-25**: ADDED: Three-option confirmation for duplicates: "Add Again", "Skip", or "Remove Existing"
- **2025-01-25**: ENHANCED: System now prevents accidental double entries and asks for user confirmation
- **2025-01-25**: APPLIED: Duplicate prevention system to both Outpatient and Inpatient calculators
- **2025-01-25**: ENHANCED: Laboratory dropdown now prevents duplicate selections at source
- **2025-01-25**: VISUAL INDICATORS: Items already in bill show red background with "● Already in Bill" text
- **2025-01-25**: SEARCH PREVENTION: Both search and dropdown check against existing bill items before allowing selection
- **2025-01-25**: FIXED: React key warning by implementing unique billId system for duplicate items
- **2025-01-25**: OPTIMIZED: Users can no longer accidentally select same item multiple times in Laboratory section
- **2025-01-25**: ADDED: Complete Laboratory-style search and dropdown functionality to X-Ray category
- **2025-01-25**: IMPLEMENTED: X-Ray category now has same advanced features: tag selection, keyboard navigation, price counter, duplicate prevention
- **2025-01-25**: ENHANCED: X-Ray section includes search suggestions, dropdown filtering, and independent search/dropdown modes
- **2025-01-25**: FIXED: X-Ray duplicate prevention - same X-ray with same film cannot be added, different films allowed
- **2025-01-25**: ENHANCED: Off-Charge/Portable button only appears when at least 1 film is selected
- **2025-01-25**: IMPROVED: X-Ray view selection automatically resets Off-Charge/Portable when film count changes
- **2025-01-25**: UPDATED: X-Ray help text to reflect new duplicate prevention and Off-Charge/Portable rules
- **2025-01-25**: FIXED: X-Ray "BOTH" selection now displays as "AP and LAT" in bill instead of "BOTH"
- **2025-01-25**: IMPLEMENTED: Complete medicine dosage system with dose prescription, medication types, and frequency selection
- **2025-01-25**: ADDED: Medicine dosage calculator with manual dose entry, Med Type dropdown (Qty, Tablet, Mg, Capsule, ml/cc, tsp, tbsp, amp, mcg, meq, tube, formula, solution)
- **2025-01-25**: ADDED: Dose frequency dropdown with medical abbreviations (QD, BID, TID, QID, QOD, QWEEK) with descriptions
- **2025-01-25**: ADDED: Total days input with automatic quantity and cost calculation based on frequency and duration
- **2025-01-25**: ENHANCED: Medicine bill entries now show complete dosage information including dose, type, frequency, duration, and calculated total quantity
- **2025-01-25**: REDIRECTED: Medicine search and dropdown selections now open dosage calculator instead of direct addition to bill
- **2025-01-25**: CREATED: Comprehensive shared medicine calculation system (shared/medicineCalculations.ts) with separate logic for outpatient vs inpatient
- **2025-01-25**: IMPLEMENTED: Advanced medicine rules - tablets breakable, capsules whole only, syrup/solution full bottles for outpatient, partial allowed for inpatient ward
- **2025-01-25**: ADDED: Core conversion rates (1cc=1ml, 1tsp=5ml, 1tbsp=15ml) and medicine type rules with proper quantity calculations
- **2025-01-25**: ENHANCED: Outpatient medicine system uses shared calculation core with isInpatient=false for full bottle requirements
- **2025-01-25**: IMPLEMENTED: Inpatient medicine system with Ward Medicine vs Discharge Medicine distinction - ward allows partial bottles, discharge requires full
- **2025-01-25**: ADDED: Inpatient medicine dosage interface with radio button selection for Ward Medicine (partial allowed) vs Discharge Medicine (full bottles)
- **2025-01-25**: PERFECTED: Medicine calculation accuracy with proper rounding, fraction handling, and medical safety requirements
- **2025-01-25**: COMPLETED: Full separation of outpatient and inpatient medicine calculation logic while sharing core mathematical functions
- **2025-01-25**: IMPLEMENTED: Batch medicine selection workflow - users can select multiple medicines before adding all to bill together
- **2025-01-25**: ADDED: Click-outside-to-close functionality for medicine dropdown with proper focus management
- **2025-01-25**: CHANGED: "Add to Bill" button to "Add" for individual medicine selection in dosage calculator
- **2025-01-25**: CREATED: Temporary medicine storage system allowing multiple medicine selections before final bill addition
- **2025-01-25**: ENHANCED: Selected medicines display with numbered items, colorful dosage badges, and improved contrast
- **2025-01-25**: REPOSITIONED: Selected medicines section now appears above dosage calculator for better workflow
- **2025-01-25**: FIXED: Color contrast and readability issues with white background and dark emerald text for selected medicines
- **2025-01-25**: COMPACTED: Selected medicines interface - moved to compact layout below Medicine label in carousel
- **2025-01-25**: OPTIMIZED: Medicine selection display uses minimal space with truncated names and small components
- **2025-01-25**: POSITIONED: Compact selected medicines now appears directly under Medicine category for space efficiency
- **2025-01-25**: ENHANCED: Updated Outpatient medicine selection interface with professional medical theme styling
- **2025-01-25**: IMPROVED: Selected medicines display now uses glass morphism cards with medical gradient backgrounds
- **2025-01-25**: STYLED: Medicine dosage calculator interface with consistent medical color palette and glass effects
- **2025-01-25**: ADDED: Enhanced calculation preview section with professional styling and detailed information display
- **2025-01-25**: FIXED: TypeScript errors in medicine calculation functions for proper type safety
- **2025-01-25**: COMPLETED: Professional medical theme styling applied to all medicine selection components
- **2025-01-25**: REPLACED: White background theme in medicine selection with dark medical theme for consistency
- **2025-01-26**: ADDED: Comprehensive patient information fields to Inpatient page - Patient Name, OPD Number, Hospital Number, Bill Number, Admission Date, Discharge Date
- **2025-01-26**: IMPLEMENTED: Automatic total admitted days calculation based on admission and discharge dates
- **2025-01-26**: ENHANCED: Patient information persistence - all fields auto-save and restore with bill data
- **2025-01-26**: STYLED: Professional patient information card with responsive grid layout and medical theme integration
- **2025-01-26**: IMPLEMENTED: DD/MM/YY date format for admission and discharge dates with custom parsing
- **2025-01-26**: REPLACED: Simple date inputs with custom DD/MM/YY spinner interface featuring up/down arrows for each component
- **2025-01-26**: IMPLEMENTED: Mouse-controlled date adjustment - click arrows to increment/decrement day, month, and year independently
- **2025-01-26**: REFINED: Clean date picker interface inspired by user preference - date display with separate D/M/Y spinner controls
- **2025-01-26**: IMPLEMENTED: Vertical date picker modal with three-column layout (Month, Day, Year) matching user's reference design
- **2025-01-26**: ADDED: Professional date selection interface with scrollable columns and blue highlighting for selected values
- **2025-01-26**: IMPLEMENTED: Complete date and time picker with 6-column layout (Month, Day, Year, Hour, Minute, AM/PM)
- **2025-01-26**: ENHANCED: Date buttons now display both date and time with proper persistence and auto-save functionality
- **2025-01-26**: ADDED: Time selection interface matching reference design with hour (1-12), minute (00-59), and AM/PM columns
- **2025-01-26**: UPDATED: Patient information labels - changed "Admission Date & Time" to "Admission Date" and "Discharge Date & Time" to "Discharge Date"
- **2025-01-26**: REMOVED: Helper text labels "Click to change admission date & time" and "Click to change discharge date & time" from patient information fields
- **2025-01-26**: COMPLETED: Final migration cleanup and project optimization for Replit environment
- **2025-01-26**: MIGRATION COMPLETED: Successfully migrated Hospital Bill Calculator from Replit Agent to standard Replit environment
- **2025-01-26**: VERIFIED: All systems operational - web server running, API endpoints responding, TypeScript compilation successful
- **2025-01-26**: FIXED: Resolved duplicate code sections and LSP diagnostics errors in Inpatient component
- **2025-01-26**: READY: Application fully deployed and ready for production use in Replit environment
- **2025-01-26**: CORRECTED: Fixed patient information labels in InpatientFixed.tsx component (the actual component in use)
- **2025-01-26**: CONFIRMED: User verified changes applied successfully - labels now show "Admission Date" and "Discharge Date"
- **2025-01-26**: UPDATED: Total admitted days calculation - discharge day not counted, except same-day admission/discharge counts as 1 day
- **2025-01-26**: ENHANCED: Patient information section now collapsible with compact design and smaller input fields
- **2025-01-26**: MOVED: Total admitted days counter to header - smaller text, right-aligned for space efficiency
- **2025-01-26**: IMPROVED: Click header to expand/collapse patient information with chevron indicators
- **2025-01-26**: FIXED: Total admitted days pluralization (1day vs 2days) and highlighted day count with medical color
- **2025-01-26**: RESTORED: Missing inpatient category buttons with complete functionality - grid/carousel modes, navigation, and item selection
- **2025-01-26**: IMPLEMENTED: Inpatient category content display with search functionality and add-to-bill capability
- **2025-01-26**: FIXED: Inpatient category order restored to original specification - outpatient categories first, then inpatient-specific categories
- **2025-01-26**: FIXED: Inpatient category button text overflow - added proper text wrapping, line clamping, and overflow handling for long category names
- **2025-01-25**: ADDED: Custom CSS classes for medicine-specific styling (medicine-item-card, medicine-dosage-card)
- **2025-01-25**: ENHANCED: Professional glass morphism effects with medical color palette throughout medicine interface
- **2025-01-25**: REDESIGNED: Medicine numbering system with clean badge design (#1, #2, etc.) replacing circular numbers
- **2025-01-25**: SIMPLIFIED: Removed gradient bar from numbering design for cleaner appearance
- **2025-01-25**: COMPACTED: Reduced spacing between selected medicines for more compact display
- **2025-01-25**: RESIZED: Made "Add to Bill" button smaller and right-aligned for better layout
- **2025-01-25**: ADDED: Edit button for selected medicines to allow modifying dosage after selection
- **2025-01-25**: ENHANCED: Edit functionality pre-fills dosage calculator with existing values for seamless editing
- **2025-01-25**: OPTIMIZED: Performance improvements with memoized calculations and reduced re-renders
- **2025-01-25**: STANDARDIZED: Made Physical Therapy and Limb and Brace "Add to Bill" buttons smaller and right-aligned for design consistency
- **2025-01-25**: COMPACTED: Made Registration Fees, Dr. Fees, and Medic Fee items smaller and more compact to reduce space usage
- **2025-01-25**: INTERACTIVE: Implemented click-to-toggle functionality - clicking item names or buttons adds/removes items from bill
- **2025-01-25**: VISUAL FEEDBACK: Added visual indicators showing which items are already in bill with checkmarks and different styling
- **2025-01-25**: ENHANCED: Updated Outpatient medicine selection interface with professional medical theme styling
- **2025-01-25**: IMPROVED: Selected medicines display now uses glass morphism cards with medical gradient backgrounds
- **2025-01-25**: STYLED: Medicine dosage calculator interface with consistent medical color palette and glass effects
- **2025-01-25**: ADDED: Enhanced calculation preview section with professional styling and detailed information display
- **2025-01-25**: FIXED: TypeScript errors in medicine calculation functions for proper type safety
- **2025-01-25**: COMPLETED: Professional medical theme styling applied to all medicine selection components

## Project Architecture
- **Web Frontend**: React with TypeScript, using shadcn/ui components and wouter for routing
- **Mobile Frontend**: React Native with TypeScript, React Navigation, and React Native Paper
- **Backend**: Express.js server with in-memory storage (MemoryStorage class)
- **API**: Complete REST API with medical items and bills endpoints
- **Web Styling**: Tailwind CSS with professional dark green medical theme
- **Mobile Styling**: React Native Paper with custom medical theme and glass morphism effects
- **Data Management**: TanStack Query for web state, AsyncStorage for mobile, in-memory storage for persistence
- **Theme**: Glass morphism effects, consistent medical color palette, proper contrast ratios

## Key Features
- **Web Application**: Outpatient bill calculation with 10+ categories
- **Web Application**: Inpatient bill calculation with 19+ categories and daily rates
- **Web Application**: Database management for medical items and procedures
- **Web Application**: Real-time search and filtering, Bill persistence in local storage
- **Mobile Application**: Native Android app with React Native
- **Mobile Application**: Professional medical theme with React Native Paper components
- **Mobile Application**: Full API integration with backend server
- **Mobile Application**: Offline support with AsyncStorage caching
- **Both Platforms**: Bangladeshi Taka (৳) currency support
- **Both Platforms**: Real-time synchronization between web and mobile

## User Preferences
- Language: English
- Technical Level: Non-technical user interface
- Focus: Professional medical billing accuracy
- Currency: Bangladeshi Taka (৳)
- Color Scheme: Professional-level dark theme with glass morphism effects
- UI Design: Glass cards with backdrop blur, neo-morphic shadows, and emerald accents
- UI Layout: Grid button layout for categories (6 buttons per row preferred)
- Button Style: Left-aligned text, rounded corners, enhanced shadows and hover effects
- Navigation: Dark gradient header with glass effects and emerald accents
- Total Section: Dark green color scheme with emerald gradient background

## Migration Tasks - COMPLETED
- [x] Install missing dependencies (react-router-dom, sonner)
- [x] Migrate from react-router-dom to wouter for Replit compatibility
- [x] Fix database initialization and local storage integration
- [x] Ensure proper client/server separation
- [x] Test all features work correctly in Replit environment
- [x] Implement user-requested grid button layout for categories